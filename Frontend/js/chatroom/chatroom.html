<dir-Header-2></dir-Header-2>
<!--MAIN CONTENT OF CHAT ROOM-->

<!--New Conversation-->
<div ng-show="addingConversation" class="add-convo">
	<form action="">
		<big class="big-underline">Who would you like to converse with?</big>
		<br>
		<br>
		<input ng-model="scrollFriendsFinder" class="convo-search" type="text" placeholder=" search here...">
		<br>
		<br>
		<div id="scrollFriends" class="panel panel-default">
			<span class="Xbtn" ng-click="cancelForm()">X</span>
			<!-- Table -->
			<table class="table">
				<div ng-repeat="friend in friends | filter: scrollFriendsFinder">
					<div style="margin: 6px 0;">
						<!--<div class="friends-seperater col-sm-2"></div>-->
						<div class="friends-seperater col-sm-1">
							<div ng-click="addingFriendsToConvo(friend, $index)" class="add-to-convo label label-primary">+</div>
						</div>
						<div class="friends-seperater col-sm-1">
							<div ng-click="deletingFriendsFromConvo(friend)" class="add-to-convo label label-danger">-</div>
						</div>
						<div class="friends-seperater col-sm-6">{{friend.name}}</div>
						<div class="friends-seperater col-sm-4 ">
							<div ng-class="{'glyphicon glyphicon-user label label-success':friend.status==='Online'}" style="padding:1px 10px;" class="glyphicon glyphicon-user label label-default">
								{{friend.status}}</div>
						</div>
					</div>
				</div>
			</table>
		</div>
		<button ng-click="submitNewConvo(friendsToAddToConvo)" class="glyphicon glyphicon-ok btn btn-success"> Submit</button>
	</form>
	<div class="friends-added-box">
		<div class="added-text">Added: </div>
		<span ng-repeat="friends in friendsToAddToConvo track by $index" style="margin:1px; float:left;" class="label label-primary">{{friends.name}}</span>
	</div>
</div>

<div>
	<div class="conversation-bar">
		<div class="conversation-title" id="convo-title">
			<nav style="margin:0;" class="navbar navbar-inverse">
				<button ng-click="addConversation()" id="add-convo-btn" class="glyphicon glyphicon-plus btn btn-primary"></button>
				<div style="margin:1%;" class="container-fluid">
					<big style="color:white;">Converstations</big>
					<div style="margin: 10px 0" class="form-group">
						<input ng-model="conversationFilter" type="text" class="form-control" placeholder="Find a converstation...">
					</div>
				</div>
				<!-- /.container-fluid -->
			</nav>
		</div>
		<div class="scrolly-convo-bar">
			<div ng-click="findCurrentConvo(convos._id, convos)" ng-click="findCurrentConvoForMessage(convos._id, convos)" class="conversations"
			ng-repeat="convos in usersInfo.conversations | filter: conversationFilter">
				<button style="float:right;padding:2px;" ng-click="deleteConvo(convos._id)" class="btn btn-primary">
					<span class="trash-can glyphicon glyphicon-trash"></span>
				</button>
				<div ng-repeat="person in convos.people track by $index"> 
					<big>
					-{{person.name}}
				</big>
				</div>
				<div style="margin-top:5px;">
					<span>New messages <span class="badge">{{convos.numNewMessages}}</span></span>
					<small class="small-text">{{convos.date | date: medium}} </small> </div>
			</div>
		</div>
		<div class="coversation-footer">
		</div>
	</div>
</div>
<div class="main-box-right">
	<div id="message-container" class="message-container">
		<div ng-show="showEnteredConversationAlert" class="entered-conversation-alert">
			<big style="border-bottom:1px solid black;">Conversation with <span ng-repeat="people in currentConvo.people">, {{people.name}}</span> </big>
		</div>
		<div ng-class="{'message-right':message.fromName==='You'}" class="message-box" ng-repeat="message in messagesInConvos">
			<!--<img class="little-avatar" src=""> </img>-->
			<img src="images/default-profile-thumb.png" style="border-radius:50%;width:45px;">
			<span style="border-bottom:1px solid black; margin-left:10px;">
				{{message.fromName}}:
				</span>
			<p style="margin:5px 10px;">{{message.content}}</p>
			<span class="message-content">{{message.time | date: 'MMM d, h:mm a'}}</span>
		</div>
	</div>
	<br>
	<br>
	<br>
	<div>
		<div>
			<textarea ng-model="newMessageText" ng-keydown="searchKeyPress(event, newMessageText);" class="input-message" rows="3" placeholder="click here to type...">
			</textarea>
			<div>
				<input id="attach-file" ng-show="showFileUpload" type="file">
				<button ng-click="attachFile()" id="attach-file" class=" btn btn-success">
					<a style="color:white;" class="glyphicon glyphicon-paperclip"></a> Attach</button>
				<button id="emoji" class="btn btn-warning"><img src="http://media.idownloadblog.com/wp-content/uploads/2014/06/Emoji-Tongue.png" style="width:110%;"></button>
				<button ng-click="sendNewMessage(newMessageText);" id="submit-message-btn" class="btn btn-primary">Send</button>
			</div>
		</div>
	</div>
</div>
<dir-Footer-2></dir-Footer-2>